\section{\textit{Semaphore} API}

\subsection{SemaphoreCreate}
\label{func:SemaphoreCreate}
\begin{pdfunction}
{SemaphoreCreate(U8\_t sem\_type, void resource,  U8\_t max\_count) }
{ 
Creates a semaphore of the specified type. If this type is not 
the maximum count will be set to max\_count. A resource 
be attached to the semaphore. }
\pdfunctionargin{(U8_t) sem_type}{ Semaphore type. Currently only SEM\_TYPE\_MUTEX\_BINARY. }
\pdfunctionargin{(void *) resource}{ Resource to protect. }
\pdfunctionargin{(U8_t) max_count}{ Maximum allowed recursive acquires. }
\pdfunctionreturn{(Id_t) }{Semaphore ID. }{INVALID_ID}{if the creation failed. }
\pdfunctionreturn{(Id_t) }{Semaphore ID. }{Other}{valid ID if the semaphore was created. }
\end{pdfunction}

\subsection{SemaphoreDelete}
\label{func:SemaphoreDelete}
\begin{pdfunction}
{SemaphoreDelete(Id\_t sem\_id) }
{ 
Deletes the semaphore and sets sem\_id to INVALID\_ID. }
\pdfunctionargin{(Id_t *) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_OK}{if the semaphore was deleted. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_LOCKED}{if the Semaphore is still acquired by one or multiple users. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_ERROR}{if the semaphore was not found. }
\end{pdfunction}

\subsection{SemaphoreAcquire}
\label{func:SemaphoreAcquire}
\begin{pdfunction}
{SemaphoreAcquire(Id\_t sem\_id) }
{ 
Attempts to acquire the semaphore. }
\pdfunctionargin{(Id_t ) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_OK}{if the semaphore was acquired. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_LOCKED}{if the Semaphore is still acquired by one or multiple users. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_ERROR}{if the semaphore was not found. }
\end{pdfunction}

\subsection{SemaphoreAcquire}
\label{func:SemaphoreAcquire}
\begin{pdfunction}
{SemaphoreAcquire(Id\_t sem\_id) }
{ 
Attempts to acquire the semaphore. If successful it return the 
resource. }
\pdfunctionargin{(Id_t ) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(void ) }{resource }{NULL}{the semaphore is still acquired by one or multiple users or the semaphore could not be found. }
\pdfunctionreturn{(void ) }{resource }{!NULL}{pointer to the resource coupled to this semaphore. }
\end{pdfunction}

\subsection{SemaphoreRelease}
\label{func:SemaphoreRelease}
\begin{pdfunction}
{SemaphoreRelease(Id\_t sem\_id) }
{ 
Releases the acquired semaphore. }
\pdfunctionargin{(Id_t ) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_OK}{if the semaphore was released. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_LOCKED}{if the semaphore was not acquired. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_ERROR}{if the semaphore was not found. }
\end{pdfunction}

\subsection{SemaphoreCountSet}
\label{func:SemaphoreCountSet}
\begin{pdfunction}
{SemaphoreCountSet(Id\_t sem\_id, U8\_t count) }
{ 
Sets a new maximum acquire count for the semaphore. }
\pdfunctionargin{(Id_t) sem_id}{ Semaphore ID. }
\pdfunctionargin{(U8_t) count}{ New max. acquire count. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_OK}{if the new count was set. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_ERROR}{if the semaphore was not found. }
\end{pdfunction}

\subsection{SemaphoreCountGet}
\label{func:SemaphoreCountGet}
\begin{pdfunction}
{SemaphoreCountGet(Id\_t sem\_id) }
{ 
Returns the current acquire count of the semaphore. }
\pdfunctionargin{(Id_t) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(U8_t) }{acquire count }{}{}
\end{pdfunction}

\subsection{SemaphoreCountReset}
\label{func:SemaphoreCountReset}
\begin{pdfunction}
{SemaphoreCountReset(Id\_t sem\_id) }
{ 
Forces the semaphore to be released by all users, setting the 
count to 0. Tasks that have acquired the semaphore at that moment 
be suspended. }
\pdfunctionargin{(Id_t) sem_id}{ Semaphore ID. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_OK}{if the count was reset. }
\pdfunctionreturn{(OsResult_t) }{sys call result }{OS_ERROR}{if the semaphore was not found. }
\end{pdfunction}
